function runSql(e){var t=db.getObjResultSet(e);return t||{}}var db=require("db").db;exports.propGroup={getLastPropgroupNo:function(){var e="select max(number) number  from propgroup where deletedate =0 ",t=runSql(e);return t[0].number||0}},exports.property={getList:function(e,t,i){i||(i="");var o="select p.* from property as p  where PROPGROUPNO="+e+" "+i;return runSql(o)},getFieldList:function(e,t){var i={},t=Ti.App.Properties.getString("lang","c");switch(e.toLowerCase()){case"propdetail":case"propertydetail":var i={narea:{field:"netarea"},garea:{field:"grossarea"},price:{field:"price",fieldType:"number",base:1e6,tool:"mortagageTool"},rent:{field:"rent",fieldType:"number"},possession:{field:t+"_possession"},availability:{field:t+"_availability"},floor:{field:"c_floor"},decoration:{field:"decoration"},carpark:{field:"carparks",returnType:"boolean"},remarks:{field:t+"_remarks",width:"100%"}};break;case"propsearch":case"propertysearch":var i={narea:{field:"netarea",fieldType:"number"},price:{field:"price",fieldType:"number",base:1e6},garea:{field:"grossarea",fieldType:"number"},rent:{field:"rent",fieldType:"number"},remarks:{field:t+"_remarks",width:"100%"}}}return i},getDetail:function(e,t){var i="select *,availability as c_availability,englishavail as e_availability,(case possession when 1 then '交吉' when 2 then '連約' else '其他' end) as c_possession, (case possession when 1 then 'Vacant' when 2 then 'TA' else 'Others' end) as e_possession from property where number="+e+" and propgroupno="+t,o=runSql(i);return o[0]},getDetailById:function(e){var t="select *,availability as c_availability,englishavail as e_availability,(case possession when 1 then '交吉' when 2 then '連約' else '其他' end) as c_possession, (case possession when 1 then 'Vacant' when 2 then 'TA' else 'Others' end) as e_possession from property where id="+e,i=runSql(t);return i[0]},getImage:function(e,t){var i="select attachment as image from propertyfile where propertyno=(select propertyno from property where number = "+e+" and propgroupno="+t+")and attachment is not null and propgroupno = "+t;return runSql(i)},updateRead:function(e){if(e){var t="update property set  read=1 where "+e;return console.log(t),runSql(t)}return!1}},exports.trans={getList:function(e){$where="";for(var t in e)""!=e[t]&&(""!=$where&&($where+=" and "),$where=$where+t+" not in ("+e[t]+") ");""!=$where&&($where=" where "+$where);var i="select * from trans"+$where;return runSql(i)},getDistEst:function(){var e="select c_district,c_estate,e_district,e_estate from trans group by c_district,c_estate,e_district,e_estate order by c_district";return runSql(e)}},exports.doc={getList:function(){var e="select * from document where deletedate =0 ";return runSql(e)},getDocument:function(e){var t="select * from document where  DOCUMENTTYPE = "+e+"  and deletedate=0";return runSql(t)}};