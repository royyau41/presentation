var viewFile=function(e,t,i,r){if(i)return getFileView(e,t,r);switch(e){case"image":case"img":var o,a=Alloy.createController("viewFile/viewFile").getView(),l=require("com.gbaldera.titouchgallery");Ti.API.info("module is => "+JSON.stringify(l));var n=Ti.Filesystem.getFile(Ti.Filesystem.tempDirectory,"test.jpg");n.write(t);var o=l.createTouchGallery({images:[Ti.Filesystem.tempDirectory+"/test.jpg"]});o.addEventListener("singletap",function(e){a.children[1].fireEvent("click"),Ti.API.debug("SingleTap event fired: "+JSON.stringify(e))}),a.children[1].add(o),a.open();break;case"pdf":var n=Ti.Filesystem.getFile(Ti.Filesystem.tempDirectory,r.fileName||"test.pdf");n.write(t),Ti.Android.currentActivity.startActivity(Ti.Android.createIntent({action:Ti.Android.ACTION_VIEW,type:"application/pdf",data:n.getNativePath()}));break;case"doc":var n}},getFileView=function(e,t){switch(e){case"jpg":case"png":case"jpeg":if(t.attachment)var i=t.attachment;else t.image?i=t.image:t.img&&(i=t.img);var r=Ti.UI.createImageView({image:Ti.Utils.base64decode(i)});return r.addEventListener("click",function(e){viewFile("img",e.source.image)}),r;case"pdf":var o,r=Ti.UI.createImageView({image:"/others/pdf.png",pdf:Ti.Utils.base64decode(t.attachment),focusable:!0});return r.addEventListener("click",function(e){viewFile("pdf",e.source.pdf,!1,{})}),o=r;case"doc":var r=Ti.UI.createImageView({image:"/others/Office_DOC.png",doc:Ti.Utils.base64decode(t.attachment),width:"100%",height:"100%",focusable:!0});return r.addEventListener("click",function(e){viewFile("doc",e.source.doc,!1,{})}),r}};exports.viewFile=viewFile;